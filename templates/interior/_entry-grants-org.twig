{# _partials/_entry-grants-org.twig 

{# =======================================
  Interior: Grantee Organization
========================================== #}

{% import '_macros/01_elements/_angles' as angles %}
{% import '_macros/02_components/_card.twig' as cards %}

{# Uncomment as needed
{% import '_macros/02_components/_assets' as assets %}
{% import '_macros/01_elements/_actions' as actions %}
{% import '_macros/01_elements/_breadcrumb' as breadcrumbs %}
{% import '_macros/01_elements/_details' as details %}
{% import '_macros/01_elements/_section-title' as sectionTitles %}
#}

{# Set Grant Year (previous year). 
    NOTE: 
    1. This might need to be adjusted depending on biz reqs 
    2. Can a grantee receive multiple grants per year?
#}

{% set layout = layout ?? 'grid' %} {# grid or list #}

{# TODO: enable filtering, grid/list toggle view, keyword search, pagination #}
{# Retrieve all grants associated with grantee #}
{% set grantList = craft.entries().section('grants').entriesOrganization(entry).all() %}

{# NOTE: the following elements will likely need to consolidated into a _sprig template #}
{% if grantList|length %}
    <section class="grants-grid" data-background="true">
        <div class="angle">
            {{ angles.top() }}
        </div>
        {# FILTERS GO HERE #}
        {# <div class="blockGeneric">
            Filters
        </div> #}

        <div class="grants-grid__inner" data-columns="2">
            {% for grant in grantList %}
                {% set config = {
                    'variant': layout == 'grid' ? 'grid' : 'list',
                    'content': {
                        'grant': grant
                    }
                }%}
                {{ cards.grant(config) }}
            {% endfor %}
        </div>
    </section>
{% endif %}

{#<section>
    <h2>Related Content</h2>
    {# FILTERS GO HERE #
    <div class="blockGeneric">
        Filters
    </div>
    {# RELATED CONTENT CARDS: List or Grid View #
    <div class="blockFeed">
    </div>

</section>  
#}