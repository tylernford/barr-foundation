{# ===========================================================
Template: interior/index.twig
URL: /
===========================================================
Interior template
=========================================================== #}

{% extends '_layouts/_base' %}

{% import '_macros/02_components/_assets' as assets %}
{% import '_macros/03_modules/_opener' as openers %}

{% block content %}

{# INTERIOR OPENER #}
{% set landingOpeners = ['aboutUs', 'grantmaking', 'newsInsights', 'programAreas'] %}
{% set entrySection = entry.section.handle %}

{% if entrySection in landingOpeners %}
    {% set opener = entry.openerLanding %}
    {{ openers.landing(opener, entry) }}
{% elseif entrySection == 'directory' %}
    {{ openers.bio(entry) }}
{% elseif entrySection == 'blog' %}
    {{ openers.post(entry) }}
{% elseif entrySection == 'grantees' %}
    {{ openers.grantee(entry) }}
{% endif %}

{# INTERIOR BUILDER: #}
{# 1. People is a unique builder 
   2. Grantee Database is builder-less
   3. Default to common builder for everything else
#}
{% set isDatabase = (entry.slug == 'grants-grantees') or (entrySection == 'grantees') %}
{% set builder =
    entry.builderCommon ??
    entry.builderPeople ??
    entry.builderProgramAreas ??
    null
%}

{% if builder %}
    {% if entrySection == 'programAreas' and entry.type == 'landing' %}
        {% include '_partials/_builder-program-areas.twig' with {'builder': builder} %}
    {% else %}
        {% include '_partials/_builder-common.twig' with {'builder': builder} %}
    {% endif %}
{% elseif isDatabase %}
    {% if entry.slug == 'grants-grantees' %}
    {# Grantee DB #}
    {% include 'interior/_entry-grants-db.twig' with {'entry': entry} %}
    {% elseif entrySection == 'grantees' %}
    {# Grantee Entry #}
    {% include 'interior/_entry-grants-org.twig' with {'entry': entry} %}
    {% endif %}
{% endif %}

{% endblock %}